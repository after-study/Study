## CHAPTER 1 함수형 프로그래밍의 정의와 현실의 차이

> 함수형 프로그래밍 (위키피디아)
> 1. <U>수학 함수</U>를 사용하고 <U>부수 효과</U>(side effect)를 피하는 것이 특징인 프로그래밍 패러다임
> 2. <U>부수 효과</U> 없이 <U>순수 함수</U>pure function만 사용하는 프로그래밍 스타일

함수형 프로그래밍의 정의에 대해 검색을 하면 위와 같은 내용 위키피디아에서 찾을 수 있는데, 수학 함수와 부수 효과라는 개념을 사용합니다.
프로그램에서 부수 효과는 함수를 호출할 때 리턴 값 이외에 발생하는 모든 일을 말하고, 순수 함수는 인자에만 의존하고 부수 효과가 없는 함수입니다. 수학 함수라고 볼 수 있습니다.
실용적인 측면에서 위 정의는 세 가지 문제가 있습니다. 첫 째, 소프트웨어에서 부수 효과는 필수적입니다. 이메일을 보내는 것과 같은 부수 효과는 프로그램을 실행하는 이유이기도 합니다. 두 번째, 부수 효과를 잘 다룰 수 있는 기술과 도구가 많이 있기 때문에 피하지 않아도 됩니다. 세 번째, 함수형 프로그래밍이 수학적이라 실제 소프트웨어 개발에서 사용하지 않는 것처럼 느껴지지만 함수형 프로그래밍으로 잘 만들어진 소프트웨어가 많이 있습니다.

어떤 관리자가 함수형 프로그래밍을 도입하고자 하는 개발자의 말을 듣고 인터넷으로 함수형 프로그래밍의 정의에 대해 찾아봅니다. 이메일을 보내는 것과 같은 부수효과를 피해야 된다는 설명을 보고 관리자는 혼란스러워 하며도입을 하지 않게 됩니다.

이 책에는 함수형 프로그래밍에 관한 학술적 내용이나 정의가 아닌 프로그래머가 가진 기술과 생각의 흐름, 시각을 정리하고 실용적이고 중요한 개념만을 모았습니다.

### 액션과 계산, 데이터 구분하기
함수형 프로그래머는 코드를 세 분류로 나눕니다. 호출할 때 조심해야 하는 코드를구분하고, 실행하는 코드와 그렇지 않은 코드를 구분합니다. 
그리고 액션과 계산, 데이터로 구분합니다. 이것이 핵심 개념입니다.

> <액션, 계산, 데이터로 구분>
> 1. 액션: 부르는 시점에 의존
> 2. 계산: 입력값을 계산해 출력, 부르는 시점이나 횟수가 중요하지 않은 코드
> 3. 데이터: 이벤트에 대한 사실을 기록한 것, 부르는 시점이나 횟수가 중요하지 않은 코드

#### 예시) 클라우드 서비스 시나리오(여러 클라이언트가 작업 완료 표시를 하면 서버에서 이일을 통해 알려주는 서비스)
파트 1에서 코드를 구분하는 방법과 왜 그렇게 하는지 설명하니 지금 잘 이해되지 않아도 좋습니다.

| 단계  | 시나리오 설명             | 구분  | 비고            |
| --- | ------------------- | --- | ------------- |
| 1   | 사용자가 작업 완료 표시를 함    | 액션  | 실행 횟수에 의존     |
| 2   | 클라이언트가 서버로 메시지를 보냄  | 액션  | 메시지는 데이터      |
| 3   | 서버가 메시지를 받음         | 액션  | 횟수에 의존        |
| 4   | 서버가 데이터베이스를 변경      | 액션  | 내부 상태를 바꿈     |
| 5   | 서버가 누구에게 알림을 보낼지 결정 | 계산  | 같은 입력 → 같은 출력 |
| 6   | 서버가 이메일로 알림을 보냄     | 액션  | 횟수에 의존        |
#### 액션, 계산, 데이터 세 가지 코드의 특징
| 분류  | 정의 및 특징                                                       | 예시 및 활용(각 분류에 해당하는 도구가 있음)                                               |
| --- | ------------------------------------------------------------- | ------------------------------------------------------------------------ |
| 액션  | 실행 시점이나 횟수 등에 따라 결과가 달라짐. <br>같은 입력이어도 외부 상태에 따라 결과가 바뀔 수 있음. | - 시간에 따라 상태를 안전하게 바꾸는 방법<br>- 순서를 보장하는 방법<br>- 액션이 정확히 한 번만 실행되게 보장하는 방법 |
| 계산  | 입력값으로 항상 같은 출력값을 만들어냄. <br>외부 상태에 영향을 받지 않음.                  | - 정확성을 위한 정적 분석<br>- 소프트웨어에서 쓸 수 있는 수학적 지식<br>- 테스트 전략                   |
| 데이터 | 실행하지 않고도 의미가 있으며, 여러 방식으로 해석 가능. <br>이벤트에 대한 기록.              | - 데이터를 구성하는 방법<br>- 데이터를 보관하기 위한 기술<br>- 데이터를 분석하여 중요한 정보를 발견하는 원리       |
#### 액션, 계산, 데이터 구분의 이점
실행 시점이나 횟수에 의존하지 않는 계산이나 데이터는 예측 가능하고 코드를 더 쉽게 이해할 수 있고 심각한 버그를 막을 수 있습니다. 
그래서 코드의 많은 부분을 액션에서 계산으로 옮기면 액션도 다루기 쉬워지며 안전하게 다룰 수 있는 기술도 존재합니다.

#### 이 책이 다른 함수형 프로그래밍 책과 다른 점
- 소프트웨어 엔지니어링 관점에서 실용적으로 씀
- 실제 있을 법한 시나리오로 설명
- 소프트웨어 설계를 중심으로 설명
- 함수형 프로그래밍의 풍부함을 배울 수 있음
- 특정 함수형 프로그래밍 언어에 종속적이지 않음
#### 함수형 사고에서 중요한 개념 두 가지
- 이 두 개념을 각각, 파트 1, 파트2에서 다룹니다.
1. 액션과 계산, 데이터를 구분해서 생각하는 것
2. 일급 추상`first-class abstraction` 이라는 개념

#### 이 책에서 다루는 두 개념의 내용
- 파트1에서 코드를 액션과 계산, 데이터로 구분하는 방법, 액션을 계산으로 리팩터링하는 방법, 액션을 더 쉽게 다루는 방법을 설명합니다. 이렇게 분류한 코드가 설계 관점에서 왜 유지보수와 테스트가 쉽고 재사용성이 좋은지에 대해 알아봅니다.
- 파트2에서는 재사용성이 높고 실용적인 일급 추상을 어떻게 쓰고 남용하지 않으려면 어떻게 해야 하는지 설명합니다. 그리고 마지막으로 설계 관점에서 반응형 아키텍처와 어니언 아키텍처를 일급 추상과 연결해서 설명합니다.

#### 이 책을 읽는 기본 규칙
1. 특정 언어 기능에 의존하지 않을 것
2. 실용적이라 바로 쓸 수 있을 것
3. 현재 가지고 있는 코드와 관계없이 쓸 수 있어야 할 것(지금 있는 코드에도 적용 할 수 있어야 함)

#### 결론
이 책은 함수형 프로그래밍은 액션과 계산, 데이터를 구분하는 것 부터 시작합니다. 실용적인 함수형 프로그래밍을 배우고 언어와 상황에 관계없이 적용할 수 있습니다.

### **요점 정리 요약**

1. **책 구성**    
    - 이 책은 두 파트로 구성됨.        
    - 각 파트는 "액션, 계산, 데이터"의 구분과 "일급 추상"을 다룸.        
    
2. **함수형 프로그래밍의 기존 한계**    
    - 기존 정의는 학계에 유용했지만, 실무적인 소프트웨어 개발에는 실용적이지 않음.        
    
3. **함수형 사고의 중요성**    
    - 이 책의 핵심 주제는 '함수형 사고'.        
    - 함수형 사고는 기술보다 개념 중심의 접근.
        
4. **세 가지 코드 유형**    
    - **액션**: 시간에 의존함 → 가장 다루기 어려움. 시간 의존적 부분을 분리해야 함.        
    - **계산**: 시간에 의존하지 않음 → 다루기 쉬움. 가능한 한 계산으로 전환하는 것이 좋음.        
    - **데이터**: 정적이며 해석이 필요. 저장, 이해, 전송이 쉬움.
        
5. **프로그래밍 언어**    
    - 책의 예제는 자바스크립트로 작성됨.        
    - 자바스크립트 문법 설명이 필요한 경우 추가 설명 제공 예정.