<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .card {
            padding: 2rem;
            height: 200px;
            font-size: 2rem;
            list-style: none;
            border-radius: 1rem;
            border: 1px solid #ccc;
            transform: translateX(200px);
            transition: 150ms ease-in-out all;

            transform: translateX(200px);
            transition: 150ms ease-in-out all;
        }

        .card.visible {
            transform: translateX(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <ul class="container">
      <li class="card">아이템 1</li>
      <li class="card">아이템 2</li>
      <li class="card">아이템 3</li>
      <li class="card">아이템 4</li>
      <li class="card">아이템 5</li>
      <li class="card">아이템 6</li>
      <li class="card">아이템 7</li>
      <li class="card">아이템 8</li>
      <li class="card">아이템 9</li>
      <li class="card">아이템 10</li>
    </ul>
    <script>
        const $cards = document.querySelectorAll('.card')
        const observer = new IntersectionObserver((entries) => {
            console.log('entries:', entries)
            entries.forEach(entry => {
                entry.target.classList.toggle("visible", entry.isIntersecting)

                if(entry.isIntersecting) {
                    observer.unobserve(entry.target)
                }
            })
        }, { threshold: 0.5 });

        $cards.forEach(card => {
            observer.observe(card)
        });

        /*
        * IntersectionObserverEntry
        */
        // 해당 요소의 크기와 위치를 의미합니다.
        // boundingClientRect: DOMRectReadOnly {x: 56, y: -249, width: 1032, height: 266, top: -249, …}
        
        // 해당 요소가 몇 %나 화면에 노출되었는지를 의미합니다. (1일 시, 100% 노출을 의미)
        // intersectionRatio: 0.06390977650880814

        // 화면에 노출된 요소의 크기와 위치를 의미합니다.
        // intersectionRect: DOMRectReadOnly {x: 56, y: 0, width: 1032, height: 17, top: 0, …}
        
        // 화면에 노출되었는지 여부를 의미합니다.
        // isIntersecting: true

        // isVisible은 인터섹션 옵저버 v2에서 사용하는 속성으로, 브라우저 지원 여부 확인 필요
        // isVisible: false

        // 감지하는 요소의 선택자를 의미합니다.
        // rootBounds: DOMRectReadOnly {x: 0, y: 0, width: 1088, height: 913, top: 0, …}

        // 감지하는 요소를 감싸는 루트 요소의 크기와 위치를 의미합니다.
        // target: li.card

        // 문서가 최초로 로드된 이후 지난 시간을 의미합니다.
        // time: 24192.5
    </script>
</body>
</html>